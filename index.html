<!doctype html><html>	<head>		<link rel="stylesheet" type="text/css" href="style/style.css"/>	</head>		<body>			<div id="header">			<img src="resources/header.jpg" class="header-img" />			<a href="about.html" style="float: right; font-size: 30px; margin-right: 6px">За мен</a>		</div>				<div id="main">			<h1>Съдържание</h1>						<div class="links">				<ul>					<li><a href="#s1">Преглед. Какво е Сокет?</a></li>					<li><a href="#s2">Какво е TCP ?</a></li>					<li><a href="#s3">Запознаване с HTTP</a></li>					<li><a href="#s4">Уеб Сокети</a></li>					<li><ul>						<li><a href="#events">Уеб Сокет Събития</a></li>						<li><a href="#methods">Уеб Сокет Методи</a></li>						<li><a href="#example1">Пример</a></li>						<li><a href="#keepAlive">Keep-alive, Heart-beats</a></li>					</ul></li>					<li><a href="#socketIO">Уеб Сокети - SocketIO</a></li>					<li><a href="#resources">Ресурси</a></li>				</ul>			</div>						<div id="s1" class="section">				<h1>Преглед. Какво е Сокет?</h1>								<p>					Мрежовите сокети се оприличават като крайна точка на комуникация между процеси в една компютърна мрежа.					В днешно време повечето комуникации между компютрите са базирани на Internet Protocol (IP). 					Повечето имплементации на интернет сокетите са базирани на стандарта Бъркли (BSD).				</p>								<p>					Един мрежови сокет се характеризира със комбинация от следните 3 неща:					<ul>						<li>Локален адрес на сокета</li>						<li>Отдалечен адрес на сокета. Само при остановена TCP връзка. По-късно ще говорим и за това.</li>						<li>Протокол - TCP, UDP, or others</li>					</ul>										Адреса на сокета от своя страна е изграден от следната 2-ка - IP адрес и номер на порт. По този адрес сокетът					знае къде точно да достави пакета с данни.				</p>								<p>					Видове интернет сокети са: 					<ul>						<li>Datagram sockets, още познати като connectionless сокети, които използват User Datagram Protocol (UDP)</li>						<li>Поточни сокети или известни като connection-oriented, те използват Transmission Control Protocol (TCP)</li>						<li>други...</li>					</ul>				</p>								<hr/>			</div>						<div id="s2" class="section">				<h1>Какво е TCP?</h1>								<p>					Transmission Control Protocol (TCP) е един от базовите протоколи които използва IP. По някой път дори го пишат					TCP/IP. Това което предлага TCP 	е надеждност, подреденост и проверка за грешки при изпращането на пакетите.					При TCP е сигурно че отсрещният процес ще получи пакетите които трябва и то в конкретния ред в който са изпратени.					Надеждността на обмена се осигурява от контролни суми и сравнения между изпратените и пристигналите данни.				</p>								<p>					IP работи чрез обмяна на информация наречена пакети. Пакетът е последователност от байтове и се състои от заглавна част					и тяло. Заглавната част описва източник, дестинация и контролна информация. Тялото съдържа данните които се предават.				</p>								<p>					В сравнение с UDP, който може незабавно да започне да изпраща пакети TCP изисква установяването на връзка преди изпращането на данни.					Съществуват три фази при осъществяването на TCP комуникация:					<ol>						<li>установяване на връзката</li>						<li>пренос на данни</li>						<li>преустановяване на връзката</li>					</ol>										<img src="resources/tcp-transport.gif" class="center small"/>				</p>								<hr/>			</div>						<div id="s3" class="section">				<h1>Запознаване с HTTP</h1>				<img src="resources/http.jpg" class="center big"/>				<p>					HTTP е протокол за трансфер на хипертекст. Използва мрежов протокол, от приложния слой на OSI модела,					за пренос на информация в компютърни мрежи. Създаден като средство за публикуване на HTML страници, протоколът довежда до формирането					на Световната уеб мрежа. Разработването на протокола е било координирано от Уеб консорциума (World Wide Web Consortium) и 					IETF (Internet Engineering Task Force), завършвайки с публикуването на серия от заявления за обсъждане (RFC), от които RFC 2616 (от юни 1999) 					е със статут на стандарт и описва HTTP/1.1 — най-новата и с най-широка употреба HTTP версия.				</p>								<p>					В HTTP протокола се използват понятия като клиент (обикновено това са Web-браузърите т.е. самите приложения,					a не физически хостовете в мрежата) и сървър (това са Web-сървърите - т.е. самите приложения, а не хостовете в мрежата).				</p>								<p>					Една HTTP сесия е последователност от заявки и отговори. Клиента осъществява TCP връзка със сървара на определен порт. 					HTTP сървър слуша на този порт за съобщението на клиента. Щом получи съобщение сървърат изпраща отговор нампример: "HTTP/1.1 200 OK" и					самото съобщение, което може да е цялата уеб страница.										<img src="resources/http_communication.png" class="center big"/>				</p>								<hr/>			</div>						<div id="s4" class="section">				<h1>Уеб Сокети</h1>										<p>						Уеб сокетите са ново поколение технология позволяваща двупосочна връзка за приложения които се изпълняват в браузери						които съвместими с HTML5 Уеб Сокети. Уеб сокетите имат удобен JavaScript интерфейс.					</p>										<p>						Уеб сокета е просто стандартен TCP сокет между клиента и сървъра. Контактът започва като HTTP връзка която след като 2-та						хоста разменят разпознаващи пакети помежду си преминава на ниво TCP. След това всяка страна може да изпраща данни без						да прави HTTP заявки.					</p>										<p>						Уеб сокетите ни дават удобен механизъм за двупосочна комуникация който замества правенето на множество HTTP конекции,						например XMLHttpRequest или "iframe" и long polling.												Преди време създаването на приложения, които се нуждаят от такава комуникация между клиент и сървър (напр. Чат приложение или Игра)						са изисквали да се правят множество постоянни HTTP заявки към сървъра, за да поддаржат своето състояние актуално.						Но това води до множество проблеми:												<ul>							<li>Сървърат е принуден да използва множество TCP конекции за всеки клиент.</li>							<li>Свързващия протокол изисква изпращането на хедъри със всяко клиентско съобщение, а тези хедъри забавят цялото съобщение.</li>							<li>Клиентският код трябва да поддържа мапинг на излизащите и пристигащите конекции, за да може да следи отговорите на сървъра.</li>						</ul>												Много по-просто би било ако използваме една TCP връзка за трафика в 2-те посоки. Това е което Уеб сокет протокола ни предлага.						Комбиниран с API-то (WSAPI) ни дава алтернатива на HTTP long polling.					</p>					<h1 id="events">Уеб Сокет Събития</h1>										<table class="api-table">						<tr>							<th>Събитие</th>							<th>Манипулатор на събитие</th>							<th>Описание</th>						</tr>						<tr>							<td>отваряне</td>														<td>Socket.open</td>														<td>Това събитие се появява когато сокет конекцията е установена.</td>						</tr>												<tr>							<td>								съобщение							</td>														<td>								Socket.onmessage							</td>														<td>								Това събитие се появява когато клиента получи данни от сървъра.							</td>						</tr>												<tr>							<td>								грешка							</td>														<td>								Socket.onerror							</td>														<td>								Това събитие се появява когато има грешка в комуникацията.							</td>						</tr>												<tr>							<td>								затваряне							</td>														<td>								Socket.onclose							</td>														<td>								Това събитие се появява когато концекцията е затворена.							</td>						</tr>					</table>										<h1>Уеб Сокет Методи</h1>										<table id="methods" class="api-table">						<tr>							<th>Метод</th>							<th>Описание</th>						</tr>						<tr>							<td>Socket.send()</td>														<td>Този метод се използва за да предаде данни по конекцията.</td>						</tr>						<tr>							<td>Socket.close()</td>														<td>Този метод се използва за прекратяване на съществуваща връзка.</td>						</tr>										</table>										<h1 id="example1">Примери</h1>					<p>						И ето и първият примерен код:					</p>						<img class="center code" src="resources/example1.png" />					<p>						Какъв е проблемът в този пример обаче. Тук имаме клиентско приложение, което чака да получи съобщение от сървъра,						който се намира на "ws://localhost:9998/echo". Такова приложение обаче няма. За целта трябва да се направи такова.						Варианти за език на който може да се напише са много, например: Java, C#, Python, NodeJS и други. За всеки от тези езици						има библиотеки, които позволяват използването на Уеб сокети.					</p>										<h1 id="keepAlive">Keep-alive, Heart-beats</h1>										<p>						Уеб сокет протокола дефинира така наречените Ping-Pong фреймове които се използват за определяне на състоянието на мрежата						те се наричат keep-alive и heart-beats.					</p>										<p>						Например ако искаме да разберем дали има провалени връзки, например някой затвори браузъра си или просто затвори тази конекция						сървърът няма да получи отговор на keep-alive и така ще разбере че този клиент вече го няма. Друг пример е ако искаме да показваме на						потребителите какво е забавянето между отделните съобщения (latency metrics). 					</p>				<hr/>			</div>						<div id="socketIO" class="section">				<h1>Уеб Сокети - SocketIO</h1>								<p>					Известна библиотека за Уеб сокети на Javascript, която предлага и сървърна и клиентска имплементация е SocketIO.					Тя предлага лесно и удобно API за използването на сокетите. Също така позволява да се правят и много други неща бързо и лесно					като например събитие когато някой клиент излезе от приложението или пак "стаи". В тези стаи могат да се включат определени клиенти					и те да могат да си изпращат данни само помежду си като знаят точно кои са те.				</p>								<p>					В <a href="https://github.com/pankrator/NodeJS-and-SocketIO/tree/feature/moving-blocks">Github</a> има качен мой примерен код който показва имплементацията на просто клиент-сървър приложение което използва Уеб сокети					с SocketIO и NodeJS за сървърната част.					За да тествате ще трябва да си изтеглите NodeJS от сайта им.				</p>								<hr/>			</div>						<div id="resources" class="section">				<h1>Ресурси</h1>										<a href="http://en.wikipedia.org/wiki/Network_socket" class="resource">Network Socket</a>					<a href="http://bg.wikipedia.org/wiki/TCP" class="resource">TCP</a>					<a href="http://en.wikipedia.org/wiki/Transmission_Control_Protocol" class="resource">Transmission Control Protocol</a>					<a href="http://bg.wikipedia.org/wiki/HTTP" class="resource">http://bg.wikipedia.org/wiki/HTTP - HTTP</a>					<a href="http://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol" class="resource">Hypertext Transfer Protocol</a>					<a href="http://tools.ietf.org/html/rfc6455" class="resource">Web Socket Specification</a>					<a href="http://www.tutorialspoint.com/html5/html5_websocket.htm" class="resource">Tutorials Point - Web Socket</a>					<a href="http://dev.w3.org/html5/websockets/" class="resource">W3C websockets</a>										<p>						Снимковия материал е намерен от изображения в google.com.					</p>									<hr/>			</div>		</div>			</body></html>